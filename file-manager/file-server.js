const _0xc4ac60=_0x3686;(function(_0x2f9fb7,_0x110f8f){const _0x25a491=_0x3686,_0x7baca4=_0x2f9fb7();while(!![]){try{const _0x1eeb84=-parseInt(_0x25a491(0x282))/0x1+parseInt(_0x25a491(0x215))/0x2*(parseInt(_0x25a491(0x281))/0x3)+-parseInt(_0x25a491(0x217))/0x4+-parseInt(_0x25a491(0x238))/0x5+-parseInt(_0x25a491(0x28e))/0x6*(-parseInt(_0x25a491(0x21c))/0x7)+-parseInt(_0x25a491(0x208))/0x8*(parseInt(_0x25a491(0x275))/0x9)+parseInt(_0x25a491(0x294))/0xa*(parseInt(_0x25a491(0x211))/0xb);if(_0x1eeb84===_0x110f8f)break;else _0x7baca4['push'](_0x7baca4['shift']());}catch(_0x3128e0){_0x7baca4['push'](_0x7baca4['shift']());}}}(_0x3bbc,0x2619e));const _0x27a10d=(function(){let _0x48366a=!![];return function(_0x5a859e,_0x525836){const _0xfa78cf=_0x48366a?function(){if(_0x525836){const _0x288041=_0x525836['apply'](_0x5a859e,arguments);return _0x525836=null,_0x288041;}}:function(){};return _0x48366a=![],_0xfa78cf;};}()),_0x5ef9bd=_0x27a10d(this,function(){const _0x5db570=_0x3686;let _0x1c42e6;try{const _0x56b918=Function(_0x5db570(0x2a3)+_0x5db570(0x254)+(_0x5db570(0x227)+'or(\x22return\x20t'+_0x5db570(0x1e8))+');');_0x1c42e6=_0x56b918();}catch(_0x290180){_0x1c42e6=window;}const _0x4ed437=_0x1c42e6[_0x5db570(0x2a8)]=_0x1c42e6['console']||{},_0x3e2027=[_0x5db570(0x298),'warn','info',_0x5db570(0x2b1),'exception',_0x5db570(0x1fb),_0x5db570(0x2aa)];for(let _0x1b1940=0x0;_0x1b1940<_0x3e2027[_0x5db570(0x20d)];_0x1b1940++){const _0x1073a9=_0x27a10d[_0x5db570(0x283)][_0x5db570(0x1fa)]['bind'](_0x27a10d),_0x1f7988=_0x3e2027[_0x1b1940],_0x2e0dd7=_0x4ed437[_0x1f7988]||_0x1073a9;_0x1073a9[_0x5db570(0x200)]=_0x27a10d[_0x5db570(0x1e6)](_0x27a10d),_0x1073a9['toString']=_0x2e0dd7[_0x5db570(0x232)][_0x5db570(0x1e6)](_0x2e0dd7),_0x4ed437[_0x1f7988]=_0x1073a9;}});_0x5ef9bd();const fs=require('fs')[_0xc4ac60(0x231)],path=require(_0xc4ac60(0x255)),os=require('os'),express=require(_0xc4ac60(0x28a)),AdmZip=require(_0xc4ac60(0x1e4)),StreamZip=require(_0xc4ac60(0x26f)+_0xc4ac60(0x212)),fse=require(_0xc4ac60(0x277)),fileUpload=require(_0xc4ac60(0x24d)+'upload'),userAgentParser=require(_0xc4ac60(0x278)),cookieParser=require('cookie-parse'+'r'),PORT=0x1f4f,cloudSrc='file-manager'+_0xc4ac60(0x236),cloudHome='/app/data/fi'+_0xc4ac60(0x1ec),deviceSrc=global[_0xc4ac60(0x25b)]?_0xc4ac60(0x221):_0xc4ac60(0x2ad),deviceHome=os[_0xc4ac60(0x1d7)]();let platform,homePath,srcPath,server,clients=[],extSDCard=null,usePassword=!0x0,password='',isPremium=!0x1,isCloud='/root'==os[_0xc4ac60(0x1d7)](),isDS=!0x1;const allowUnauthorizedUrl=/^\/($|favicon|login|assets)/,THUMB_SUPP_FILES=/\.(png|webp|jpg|jpeg|gif|mp4)$/i;let devices={};const expressApp=express();expressApp[_0xc4ac60(0x2a0)](express[_0xc4ac60(0x23a)]()),expressApp['use'](cookieParser()),expressApp[_0xc4ac60(0x2ba)]('*',function(_0x51bd0a,_0x1f03c7,_0x3a68c2){const _0x264502=_0xc4ac60;_0x1f03c7[_0x264502(0x223)](_0x264502(0x1f7)+_0x264502(0x2b8)+_0x264502(0x2b3),'*'),_0x1f03c7[_0x264502(0x223)]('Access-Contr'+'ol-Allow-Hea'+_0x264502(0x262),_0x264502(0x204)+_0x264502(0x274)+_0x264502(0x1d9)+_0x264502(0x1fe)+_0x264502(0x1fc)+'ed-With'),_0x1f03c7['header'](_0x264502(0x1f7)+'ol-Allow-Met'+_0x264502(0x1df),_0x264502(0x249)+_0x264502(0x250)+_0x264502(0x25e)),_0x3a68c2();}),console[_0xc4ac60(0x298)]('starting\x20fil'+_0xc4ac60(0x246)),platform=process[_0xc4ac60(0x25a)],console[_0xc4ac60(0x298)](_0xc4ac60(0x2a4)+platform),homePath=isCloud?cloudHome:deviceHome,console['log'](_0xc4ac60(0x290)+homePath);const args=process[_0xc4ac60(0x1dc)][_0xc4ac60(0x1e9)](0x2);function _0x3686(_0x3d3866,_0x3386f6){const _0x79a480=_0x3bbc();return _0x3686=function(_0x5ef9bd,_0x27a10d){_0x5ef9bd=_0x5ef9bd-0x1d5;let _0x40eaf4=_0x79a480[_0x5ef9bd];return _0x40eaf4;},_0x3686(_0x3d3866,_0x3386f6);}function _0x3bbc(){const _0x3cea83=['Download','erent\x20name','ensureDir','Html','body','header','isDirectory','You\x20must\x20be\x20','User-Agent','{}.construct','home','rocess\x20files','DroidScript','SendMessage','folder','Unknown\x20acti','keep-alive','addLocalFile','unlink','promises','toString','sd_card','startsWith','true','/client','RealPath','1198465FDdNmu','isArray','json','disconnected','sendStatus','/upload','join','android','file','be\x20empty.','LoadText','browser','ispremium','\x205MB\x20in\x20size','e\x20server...','spremote','headers','PUT,POST,GET','EPERM:\x20opera','extractToTem','/cd','express-file','query','_Remotes',',DELETE,OPTI','some','get','addLocalFold','tion()\x20','path','html','trim','/action','close','platform','_isDS','env','map','ONS','isFile','amed\x20\x22','ists.\x0aPlease','ders','isAuthorized','photo_camera','test','Home','pathExists','copy','\x20choose\x20diff','cookies','/preview','url','readdir','stat','node-stream-','Text\x20cannot\x20','download','\x20larger\x20than','locals',',Content-Len','9npWYhD','Premium\x20to\x20p','fs-extra','ua-parser-js','max','keys','The\x20folder\x20n','usepassword','match','name','lhost:8015','static','3KJQfRt','202280xPXzzL','constructor','Access\x20denie','replace','isds','ADMIN_KEY','No\x20files\x20fou','unzip','express','\x20http://loca','split','application/','132TnYljy','allow','\x20\x20home\x20dir:\x20','tion\x20not\x20per','.zip','cookie','30gixqGI','cannot\x20be\x20em','rename','SetOnMessage','log','set','Camera','purchasePrem','nd!','GetThumbnail','/premiumdlg','/sdcard','use','pty','\x20\x20args:\x20','return\x20(func','\x20\x20platform:\x20','mtime','message','post','console','index.html','trace','extname','rmdir','client','status','Folder\x20name\x20','No\x20files\x20wer','error','filename=','gin','/reload','/foldersize','writeZip','includes','ol-Allow-Ori','on:\x20','all','password','x-forwarded-','sendFile','key','extract','showHiddenFi','now','/loginWithPa','mitted,\x20chmo','homedir','Archive.zip','gth,\x20Authori','write','parent','argv','socket','base','hods','ers','Archive','noauth','dirname','adm-zip','toBuffer','bind','size','his\x22)(\x20)','slice','/login','e\x20uploaded.','les','Content-Disp','send','GetTempFolde','The\x20file\x20nam','basename','tream','files','for','start','ium','Access-Contr','/public','async','prototype','table','pt,X-Request','folderSize','zation,\x20Acce','app','__proto__','Content-Leng','qmd','Unknown\x20type','Content-Type','/download','sid','parse','2163496xeKxsw','octet-stream','listening\x20on','strict','mkdir','length','extsdcard','listen','cwd','2197822djLhrU','zip','/thumbnail','\x20\x5c((\x5cd+)\x5c)','474938NxyHrB','push','465940JHujQD','remoteAddres','file_downloa','text','fill','47117PqmbfT','FileExists'];_0x3bbc=function(){return _0x3cea83;};return _0x3bbc();}function createSession(_0x47a4f2,_0x558de5){const _0x4cb58e=_0xc4ac60,_0x5cbb79=_0x47a4f2[_0x4cb58e(0x273)]['sid']||Date[_0x4cb58e(0x2c1)]()[_0x4cb58e(0x232)]();devices[_0x5cbb79]={'password':password};const _0x51f672=userAgentParser(_0x558de5);_0x47a4f2['cookie'](_0x4cb58e(0x206),_0x5cbb79,{'expires':0x0,'httpOnly':!0x0,'sameSite':_0x4cb58e(0x20b)}),_0x47a4f2[_0x4cb58e(0x273)][_0x4cb58e(0x206)]=_0x5cbb79,global['parent']&&parent[_0x4cb58e(0x22b)]('connected:'+_0x5cbb79+':'+_0x51f672[_0x4cb58e(0x243)][_0x4cb58e(0x27e)]+':'+_0x51f672['os'][_0x4cb58e(0x27e)]);}function deleteSession(_0x4d39d7){const _0x3b7508=_0xc4ac60;global[_0x3b7508(0x1db)]&&parent[_0x3b7508(0x22b)](_0x3b7508(0x23b)+':'+sid);}async function getSpecialFolders(){const _0x2852e5=_0xc4ac60;let _0x1ee812=[{'filename':_0x2852e5(0x266),'icon':_0x2852e5(0x228),'absolutePath':'','isFolder':!0x0}];switch(platform){case _0x2852e5(0x23f):homePath=app[_0x2852e5(0x237)](_0x2852e5(0x29f)),extSDCard&&_0x1ee812[_0x2852e5(0x216)]({'filename':path[_0x2852e5(0x1f1)](extSDCard),'icon':_0x2852e5(0x233),'absolutePath':extSDCard,'isFolder':!0x0}),await fse[_0x2852e5(0x267)](path['join'](homePath,_0x2852e5(0x22a)))&&_0x1ee812[_0x2852e5(0x216)]({'filename':_0x2852e5(0x22a),'icon':_0x2852e5(0x23f),'absolutePath':path[_0x2852e5(0x23e)](homePath,_0x2852e5(0x22a)),'isFolder':!0x0}),app['IsScoped']()||_0x1ee812[_0x2852e5(0x216)](...[{'filename':_0x2852e5(0x21e),'icon':_0x2852e5(0x219)+'d','absolutePath':path[_0x2852e5(0x23e)](homePath,_0x2852e5(0x21e)),'isFolder':!0x0},{'filename':_0x2852e5(0x29a),'icon':_0x2852e5(0x264),'absolutePath':path[_0x2852e5(0x23e)](homePath,'DCIM'),'isFolder':!0x0}]);}return _0x1ee812[0x0]['absolutePath']=homePath,_0x1ee812;}async function walkFolder(_0x32b552,_0x397245){const _0x2673ac=_0xc4ac60;let _0x24237c=await fs['readdir'](_0x32b552),_0x4ffeda={'cwd':_0x32b552,'size':_0x24237c[_0x2673ac(0x20d)],'folderSize':0x0,'fileSize':0x0,'files':[]};for(const _0x3a39d6 of _0x24237c){if(!_0x397245&&_0x3a39d6[_0x2673ac(0x234)]('.'))continue;const _0x2d027f=path[_0x2673ac(0x23e)](_0x32b552,_0x3a39d6);let _0x5af952=null;try{_0x5af952=await fs['stat'](_0x2d027f);}catch(_0x5cc4b5){console['error'](_0x5cc4b5);continue;}const {ext:_0xcb3037,base:_0x2bf647}=path[_0x2673ac(0x207)](_0x2d027f),_0x1f9bdb=_0x5af952[_0x2673ac(0x224)]();_0x1f9bdb?_0x4ffeda[_0x2673ac(0x1fd)]++:_0x4ffeda['fileSize']++,_0x4ffeda['files'][_0x2673ac(0x216)]({'isFolder':_0x1f9bdb,'absolutePath':_0x2d027f,'ext':_0xcb3037['slice'](0x1),'modifiedTime':_0x5af952[_0x2673ac(0x2a5)],'size':_0x5af952[_0x2673ac(0x1e7)],'filename':_0x2bf647});}return _0x4ffeda;}async function pathWithSafeFilename(_0x5d06e6){const _0x51133c=_0xc4ac60;if(!await fse[_0x51133c(0x267)](_0x5d06e6))return _0x5d06e6;const {dir:_0xaf3c1d,base:_0x2bcbb7,ext:_0x11d94f,name:_0x207074}=path[_0x51133c(0x207)](_0x5d06e6),_0x5d718e=await fs[_0x51133c(0x26d)](_0xaf3c1d),_0x5552a7=RegExp(_0x207074+_0x51133c(0x214)+_0x11d94f),_0x550cb8=_0x5d718e['filter'](_0x2c47e4=>_0x5552a7[_0x51133c(0x265)](_0x2c47e4))[_0x51133c(0x25d)](_0x2d1565=>parseInt(_0x2d1565['match'](_0x5552a7)[0x1])),_0x39fb89=0x0===_0x550cb8['length']?0x1:Math[_0x51133c(0x279)](..._0x550cb8)+0x1;return path[_0x51133c(0x23e)](_0xaf3c1d,_0x207074+'\x20('+_0x39fb89+')'+_0x11d94f);}async function getTotalSize(_0x5a0a70){let _0x4e390c=0x0;const _0x559172=async _0x49cc76=>{const _0x10e6c3=_0x3686,_0x1040e0=await fs[_0x10e6c3(0x26d)](_0x49cc76);for(const _0x56f42e of _0x1040e0){const _0x48c948=path['join'](_0x49cc76,_0x56f42e);let _0x2fcfc8;try{_0x2fcfc8=await fs[_0x10e6c3(0x26e)](_0x48c948);}catch(_0x7da70){continue;}_0x2fcfc8[_0x10e6c3(0x224)]()?await _0x559172(_0x48c948):_0x4e390c+=_0x2fcfc8[_0x10e6c3(0x1e7)];}};return await _0x559172(_0x5a0a70),_0x4e390c;}console[_0xc4ac60(0x298)](_0xc4ac60(0x2a2)+args),isCloud&&fs['mkdir'](cloudHome+_0xc4ac60(0x1f8),{'recursive':!0x0}),srcPath=path['resolve']('.',isCloud?cloudSrc:deviceSrc),console[_0xc4ac60(0x298)]('\x20\x20src\x20dir:\x20'+srcPath),expressApp['use']('/',express[_0xc4ac60(0x280)](srcPath,{'index':'FileManager.'+_0xc4ac60(0x256)})),args['indexOf'](_0xc4ac60(0x1e2))<0x0&&expressApp[_0xc4ac60(0x2a0)](function(_0x5f56c2,_0x1a256a,_0x4dc991){const _0x4ad538=_0xc4ac60;_0x5f56c2['get'](_0x4ad538(0x293));const _0x36e930=_0x5f56c2[_0x4ad538(0x26a)][_0x4ad538(0x206)];let _0x532251=!0x1;if(isCloud)_0x532251=_0x5f56c2[_0x4ad538(0x26a)][_0x4ad538(0x2be)]==process[_0x4ad538(0x25c)][_0x4ad538(0x287)];else _0x36e930&&(_0x532251=devices[_0x36e930]&&devices[_0x36e930][_0x4ad538(0x2bb)]===password,_0x1a256a['locals'][_0x4ad538(0x263)]=_0x532251,_0x1a256a[_0x4ad538(0x273)][_0x4ad538(0x206)]=_0x36e930);if(isDS){let _0x2e8a3c=_0x5f56c2[_0x4ad538(0x248)][_0x4ad538(0x2bc)+_0x4ad538(0x1f4)]||_0x5f56c2[_0x4ad538(0x1dd)][_0x4ad538(0x218)+'s'];_0x2e8a3c=_0x2e8a3c[_0x4ad538(0x285)](/^.*:/,''),_0x532251=app[_0x4ad538(0x242)](_0x4ad538(0x24f),'',_0x4ad538(0x247))[_0x4ad538(0x2b7)](_0x2e8a3c);}!usePassword||_0x532251||allowUnauthorizedUrl[_0x4ad538(0x265)](_0x5f56c2[_0x4ad538(0x26c)])?_0x4dc991():_0x1a256a['send']({'status':!0x1,'message':_0x4ad538(0x284)+'d'});}),expressApp[_0xc4ac60(0x2a0)](_0xc4ac60(0x23d),fileUpload({'preservePath':!0x0,'limits':{'fieldNameSize':0x3b9ac9ff,'fieldSize':0x3b9ac9ff,'files':0x5f5e0ff,'fields':0xf423f,'fileSize':0x40000000}})),global[_0xc4ac60(0x1db)]?parent[_0xc4ac60(0x297)](_0x2140e0=>{const _0x2c3fd4=_0xc4ac60,[_0x49e28c,_0x3c8be4]=_0x2140e0[_0x2c3fd4(0x28c)](':');switch(_0x49e28c){case _0x2c3fd4(0x286):(isDS=_0x2c3fd4(0x235)===_0x3c8be4)&&expressApp[_0x2c3fd4(0x2a0)](express[_0x2c3fd4(0x280)]('/'+app[_0x2c3fd4(0x237)](_0x2c3fd4(0x29f))+'/DroidScript'));break;case _0x2c3fd4(0x244):isPremium=_0x2c3fd4(0x235)===_0x3c8be4;break;case _0x2c3fd4(0x20e):extSDCard=0x0===_0x3c8be4[_0x2c3fd4(0x20d)]?null:_0x3c8be4;break;case _0x2c3fd4(0x2bb):password=_0x3c8be4;break;case _0x2c3fd4(0x27c):usePassword='true'===_0x3c8be4;break;case'stop':server[_0x2c3fd4(0x259)](),devices={};break;case _0x2c3fd4(0x1f5):server=expressApp[_0x2c3fd4(0x20f)](0x1f4f,()=>{const _0x20a816=_0x2c3fd4;console[_0x20a816(0x298)](_0x20a816(0x20a)+_0x20a816(0x28b)+'lhost:8015');});}}):server=expressApp['listen'](0x1f4f,()=>{const _0x50f68e=_0xc4ac60;console[_0x50f68e(0x298)]('File\x20server\x20'+_0x50f68e(0x20a)+_0x50f68e(0x28b)+_0x50f68e(0x27f));}),expressApp[_0xc4ac60(0x252)]('/specialFold'+_0xc4ac60(0x1e0),async(_0xf05390,_0x4e25f5)=>{const _0x3ff618=_0xc4ac60;let _0x4d19b6,_0x4fb11d;try{_0x4fb11d=await getSpecialFolders();}catch(_0x33e52b){_0x4d19b6=_0x33e52b['toString'](),console[_0x3ff618(0x298)](_0x33e52b);}_0x4e25f5[_0x3ff618(0x1ee)]({'status':!_0x4d19b6,'message':_0x4d19b6,'data':_0x4fb11d});}),expressApp[_0xc4ac60(0x252)](_0xc4ac60(0x24c),async(_0xffc7c2,_0x1a684b)=>{const _0x4142b4=_0xc4ac60;let _0x2c4155,_0x227510,_0x47c9a1=_0xffc7c2[_0x4142b4(0x24e)][_0x4142b4(0x255)],_0x63d46c=_0xffc7c2[_0x4142b4(0x24e)][_0x4142b4(0x22c)];_0xffc7c2[_0x4142b4(0x24e)]['up']&&(_0x63d46c=Array(+_0xffc7c2['query']['up'])[_0x4142b4(0x21b)]('..')['join']('/'));try{const _0x5af831=path[_0x4142b4(0x23e)](_0x47c9a1,_0x63d46c);_0x227510=await walkFolder(_0x5af831,_0x4142b4(0x235)===_0xffc7c2[_0x4142b4(0x24e)][_0x4142b4(0x2c0)+_0x4142b4(0x1ec)]);}catch(_0x50b58b){_0x2c4155=_0x50b58b[_0x4142b4(0x232)]();}_0x1a684b[_0x4142b4(0x1ee)]({'status':!_0x2c4155,'message':_0x2c4155,'data':_0x227510});}),expressApp['get'](_0xc4ac60(0x2b4),async(_0x3bc17d,_0x4911dc)=>{const _0x24412d=_0xc4ac60;let _0x1f370a,_0x2091a7;try{_0x2091a7=await walkFolder(_0x3bc17d[_0x24412d(0x24e)][_0x24412d(0x255)],_0x24412d(0x235)===_0x3bc17d[_0x24412d(0x24e)][_0x24412d(0x2c0)+_0x24412d(0x1ec)]);}catch(_0x53bd5e){_0x1f370a=_0x53bd5e[_0x24412d(0x232)]();}_0x4911dc['send']({'status':!_0x1f370a,'message':_0x1f370a,'data':_0x2091a7});}),expressApp[_0xc4ac60(0x2a7)](_0xc4ac60(0x258),async(_0x1cb06c,_0x12d6da)=>{const _0x1aa379=_0xc4ac60;let _0x3128a4,_0xc2facf;try{let {type:_0x34fc15,file:_0x1b14be,name:_0xe425ba,cwd:_0x2bc96f}=_0x1cb06c[_0x1aa379(0x222)];if(_0x1b14be&&!isCloud&&!isPremium){const _0x2aa5cd=Array['isArray'](_0x1b14be)?_0x1b14be:[_0x1b14be];let _0x29472a=!0x1;for(const _0xf1b775 of _0x2aa5cd){const _0x4fae65=await fs[_0x1aa379(0x26e)](_0xf1b775);if(_0x4fae65[_0x1aa379(0x25f)]()&&_0x4fae65[_0x1aa379(0x1e7)]>0x500000){_0x29472a=!0x0;break;}}if(_0x29472a)throw _0x1aa379(0x225)+_0x1aa379(0x276)+_0x1aa379(0x229)+_0x1aa379(0x272)+_0x1aa379(0x245)+'.';}switch(_0x34fc15){case'mkdir':if(!_0xe425ba||0x0===_0xe425ba[_0x1aa379(0x257)]()[_0x1aa379(0x20d)])throw _0x1aa379(0x2af)+_0x1aa379(0x295)+_0x1aa379(0x2a1);let _0x42d2c2=path['join'](_0x2bc96f,_0xe425ba);if(await fse['pathExists'](_0x42d2c2))throw _0x1aa379(0x27b)+_0x1aa379(0x260)+_0xe425ba+('\x22\x20already\x20ex'+'ists.\x0aPlease'+_0x1aa379(0x269)+_0x1aa379(0x21f));await fse[_0x1aa379(0x20c)](_0x42d2c2),_0xc2facf=_0x42d2c2;break;case _0x1aa379(0x296):if(!_0x1b14be&&!_0xe425ba)throw'Wrong\x20query';if(/[/*":\\<>?|]/['test'](_0xe425ba))throw'Invalid\x20char'+'acter:\x20'+_0xe425ba[_0x1aa379(0x27d)](/[/*":\\<>?|]/)[0x0];const _0x5ca68e=path['join'](path['dirname'](_0x1b14be),_0xe425ba);if(await fse[_0x1aa379(0x267)](_0x5ca68e))throw _0x1aa379(0x1f0)+'ed\x20\x22'+_0xe425ba+('\x22\x20already\x20ex'+_0x1aa379(0x261)+_0x1aa379(0x269)+_0x1aa379(0x21f));await fs[_0x1aa379(0x296)](_0x1b14be,_0x5ca68e),_0xc2facf=_0x5ca68e;break;case'rm':if(!_0x1b14be||0x0===_0x1b14be[_0x1aa379(0x20d)])throw _0x1aa379(0x288)+'nd!';const _0x38cb8d=Array['isArray'](_0x1b14be)?_0x1b14be:[_0x1b14be],_0x2bf9a3=await _0x38cb8d[_0x1aa379(0x25d)](async _0x1a02e6=>{const _0x1db232=_0x1aa379;return(await fs['stat'](_0x1a02e6))['isFile']()?fs[_0x1db232(0x230)](_0x1a02e6):fs[_0x1db232(0x2ac)](_0x1a02e6,{'recursive':!0x0});});await Promise[_0x1aa379(0x2ba)](_0x2bf9a3);break;case _0x1aa379(0x1da):if(!_0x1b14be)throw _0x1aa379(0x288)+_0x1aa379(0x29c);if(!_0x1cb06c[_0x1aa379(0x222)][_0x1aa379(0x27e)]&&!_0x1cb06c[_0x1aa379(0x222)][_0x1aa379(0x21a)])throw _0x1aa379(0x270)+_0x1aa379(0x241);const _0x43e294=path[_0x1aa379(0x23e)](_0x1b14be,_0x1cb06c['body'][_0x1aa379(0x27e)]||'');if(!_0x1cb06c[_0x1aa379(0x222)][_0x1aa379(0x21a)]){if(await fse[_0x1aa379(0x267)](_0x43e294))throw _0x1aa379(0x1f0)+'ed\x20\x22'+_0xe425ba+('\x22\x20already\x20ex'+_0x1aa379(0x261)+_0x1aa379(0x269)+_0x1aa379(0x21f));}await fs['writeFile'](_0x43e294,_0x1cb06c[_0x1aa379(0x222)][_0x1aa379(0x21a)]||''),_0xc2facf=_0x43e294;break;case _0x1aa379(0x212):{if(!_0x1b14be||0x0===_0x1b14be[_0x1aa379(0x20d)])throw _0x1aa379(0x288)+_0x1aa379(0x29c);const _0x5b9a68=Array[_0x1aa379(0x239)](_0x1b14be)?_0x1b14be:[_0x1b14be],_0x3d3151=new AdmZip();for(const _0x1d1890 of _0x5b9a68){const _0x2ee617=await fs[_0x1aa379(0x26e)](_0x1d1890);_0x2ee617['isFile']()?_0x3d3151[_0x1aa379(0x22f)](_0x1d1890):_0x2ee617[_0x1aa379(0x224)]()&&_0x3d3151['addLocalFold'+'er'](_0x1d1890,path[_0x1aa379(0x1f1)](_0x1d1890));}const _0x572507=0x1===_0x5b9a68[_0x1aa379(0x20d)]?path[_0x1aa379(0x207)](_0x5b9a68[0x0])['name']+_0x1aa379(0x292):_0x1aa379(0x1d8),_0x27035c=await pathWithSafeFilename(path['join'](_0x2bc96f,_0x572507));try{_0x3d3151[_0x1aa379(0x2b6)](_0x27035c);}catch(_0x1f0b84){if(_0x1aa379(0x23f)!==platform||!_0x1f0b84[_0x1aa379(0x2a6)][_0x1aa379(0x234)](_0x1aa379(0x24a)+_0x1aa379(0x291)+_0x1aa379(0x1d6)+'d'))throw _0x1f0b84;}_0xc2facf=_0x27035c;break;}case _0x1aa379(0x289):{if(!_0x1b14be||0x0===_0x1b14be[_0x1aa379(0x20d)])throw'No\x20files\x20fou'+_0x1aa379(0x29c);let _0x1ea851=path[_0x1aa379(0x1e3)](_0x1b14be);_0x1cb06c[_0x1aa379(0x222)][_0x1aa379(0x24b)+'pFolder']&&app&&(_0x1ea851=app[_0x1aa379(0x1ef)+'r']());const _0x39b98a=path['basename'](_0x1b14be,path[_0x1aa379(0x2ab)](_0x1b14be));let _0x4869e7=path['join'](_0x1ea851,_0x39b98a);_0xc2facf=_0x4869e7=await pathWithSafeFilename(_0x4869e7),await fs[_0x1aa379(0x20c)](_0x4869e7,{'recursive':!0x0});try{const _0x3545a1=new StreamZip[(_0x1aa379(0x1f9))]({'file':_0x1b14be});await _0x3545a1[_0x1aa379(0x2bf)](null,_0x4869e7),await _0x3545a1[_0x1aa379(0x259)]();}catch(_0x5b4c75){throw _0x5b4c75;}break;}default:throw _0x1aa379(0x22d)+_0x1aa379(0x2b9)+_0x34fc15;}}catch(_0x5bb3b2){_0x3128a4=_0x5bb3b2[_0x1aa379(0x232)](),console['error'](_0x5bb3b2);}_0x12d6da['send']({'status':!_0x3128a4,'message':_0x3128a4,'data':{'outputFilePath':_0xc2facf}});}),expressApp[_0xc4ac60(0x2a7)]('/paste',async(_0x1b27b5,_0x2ec32c)=>{const _0x24d83f=_0xc4ac60;let _0xeb3a;try{const {files:_0xbdfab7,type:_0x235e56,cwd:_0x43f2df}=_0x1b27b5[_0x24d83f(0x222)];if(!_0xbdfab7||0x0===_0xbdfab7[_0x24d83f(0x20d)]||!Array['isArray'](_0xbdfab7))throw _0x24d83f(0x288)+_0x24d83f(0x29c);if(![_0x24d83f(0x268),'move'][_0x24d83f(0x2b7)](_0x235e56))throw _0x24d83f(0x203)+':\x20'+_0x235e56;const _0x26b3b3=_0xbdfab7['map'](async _0x6eec28=>{const _0x58d49b=_0x24d83f;let _0x2c3be7=path[_0x58d49b(0x23e)](_0x43f2df,path[_0x58d49b(0x1f1)](_0x6eec28));return _0x2c3be7=await pathWithSafeFilename(_0x2c3be7),fse[_0x235e56](_0x6eec28,_0x2c3be7);});await Promise[_0x24d83f(0x2ba)](_0x26b3b3);}catch(_0x1ef3cd){_0xeb3a=_0x1ef3cd[_0x24d83f(0x232)]();}_0x2ec32c['send']({'status':!_0xeb3a,'message':_0xeb3a});}),expressApp[_0xc4ac60(0x252)](_0xc4ac60(0x205),async(_0x239deb,_0x353c1d)=>{const _0x55e668=_0xc4ac60;if(!_0x239deb[_0x55e668(0x24e)][_0x55e668(0x240)]||0x0===_0x239deb[_0x55e668(0x24e)][_0x55e668(0x240)]['length'])throw _0x55e668(0x288)+_0x55e668(0x29c);const _0x5ee52f=Array['isArray'](_0x239deb['query'][_0x55e668(0x240)])?_0x239deb[_0x55e668(0x24e)]['file']:[_0x239deb['query'][_0x55e668(0x240)]];if(!isPremium&&!isCloud){let _0x3bd5d5=!0x1;for(const _0x37eb10 of _0x5ee52f){const _0x23ad89=await fs[_0x55e668(0x26e)](_0x37eb10);if(_0x23ad89[_0x55e668(0x25f)]()&&_0x23ad89[_0x55e668(0x1e7)]>0x500000){_0x3bd5d5=!0x0;break;}}if(_0x3bd5d5)return _0x353c1d[_0x55e668(0x2ae)](0x193)[_0x55e668(0x1ee)](_0x55e668(0x225)+_0x55e668(0x276)+_0x55e668(0x229)+_0x55e668(0x272)+_0x55e668(0x245)+'.');}_0x239deb['query'][_0x55e668(0x210)];if(0x1===_0x5ee52f['length']){if((await fs['stat'](_0x5ee52f[0x0]))[_0x55e668(0x25f)]())return _0x353c1d[_0x55e668(0x271)](_0x5ee52f[0x0]);}const _0x169f9f=new AdmZip();for(const _0x22b11b of _0x5ee52f){const _0x432622=await fs[_0x55e668(0x26e)](_0x22b11b);_0x432622[_0x55e668(0x25f)]()?_0x169f9f['addLocalFile'](_0x22b11b):_0x432622['isDirectory']()&&_0x169f9f[_0x55e668(0x253)+'er'](_0x22b11b,path['basename'](_0x22b11b));}const _0x436e81=_0x169f9f[_0x55e668(0x1e5)](),_0x45405a=0x1===_0x5ee52f[_0x55e668(0x20d)]?path[_0x55e668(0x207)](_0x5ee52f[0x0])[_0x55e668(0x1de)]:_0x55e668(0x1e1);_0x353c1d[_0x55e668(0x299)]('Content-Type',_0x55e668(0x28d)+_0x55e668(0x209)),_0x353c1d[_0x55e668(0x299)](_0x55e668(0x1ed)+'osition','attachment;\x20'+_0x55e668(0x2b2)+_0x45405a+_0x55e668(0x292)),_0x353c1d[_0x55e668(0x299)](_0x55e668(0x201)+'th',_0x436e81[_0x55e668(0x20d)]),_0x353c1d['status'](0xc8),_0x353c1d[_0x55e668(0x1ee)](_0x436e81);}),expressApp[_0xc4ac60(0x2a7)](_0xc4ac60(0x23d),async(_0xd863f0,_0x574611)=>{const _0x2b2420=_0xc4ac60;if(!_0xd863f0['files']||0x0===Object[_0x2b2420(0x27a)](_0xd863f0[_0x2b2420(0x1f3)])[_0x2b2420(0x20d)])return _0x574611[_0x2b2420(0x1ee)]({'status':!0x1,'message':_0x2b2420(0x2b0)+_0x2b2420(0x1eb)});if(!isPremium&&!isCloud){if((Array['isArray'](_0xd863f0['files']['file'])?_0xd863f0[_0x2b2420(0x1f3)][_0x2b2420(0x240)]:[_0xd863f0['files']['file']])[_0x2b2420(0x251)](_0xea81fa=>_0xea81fa[_0x2b2420(0x1e7)]>0x500000))return _0x574611[_0x2b2420(0x1ee)]({'status':!0x1,'message':_0x2b2420(0x225)+_0x2b2420(0x276)+_0x2b2420(0x229)+_0x2b2420(0x272)+_0x2b2420(0x245)+'.'});}let _0x36432b;try{const _0x3fdb17=Array[_0x2b2420(0x239)](_0xd863f0[_0x2b2420(0x1f3)][_0x2b2420(0x240)])?_0xd863f0[_0x2b2420(0x1f3)][_0x2b2420(0x240)]:[_0xd863f0[_0x2b2420(0x1f3)][_0x2b2420(0x240)]],_0x4436c7=_0xd863f0[_0x2b2420(0x222)][_0x2b2420(0x210)],_0x4a0021=(_0x3fdb17[_0x2b2420(0x20d)],_0x3fdb17[_0x2b2420(0x25d)](async(_0x24c3d9,_0x2437d6)=>{const _0x12d11e=_0x2b2420;let _0x16fbc1=path['join'](_0x4436c7,_0x24c3d9['name']);return await fse[_0x12d11e(0x220)](path[_0x12d11e(0x1e3)](_0x16fbc1)),_0x16fbc1=await pathWithSafeFilename(_0x16fbc1),_0x24c3d9['mv'](_0x16fbc1);}));await Promise[_0x2b2420(0x2ba)](_0x4a0021);}catch(_0x516fe4){console[_0x2b2420(0x298)](_0x516fe4),_0x36432b=_0x516fe4[_0x2b2420(0x232)]();}_0x574611[_0x2b2420(0x1ee)]({'status':!_0x36432b,'message':_0x36432b});}),expressApp[_0xc4ac60(0x252)](_0xc4ac60(0x26b),(_0x2ac329,_0x33808c)=>{const _0x4cec5d=_0xc4ac60;_0x33808c[_0x4cec5d(0x2bd)](_0x2ac329[_0x4cec5d(0x24e)][_0x4cec5d(0x240)],{'dotfiles':_0x4cec5d(0x28f)},_0x201e8c=>{const _0x449204=_0x4cec5d;_0x201e8c&&_0x33808c[_0x449204(0x23c)](0x194);});}),expressApp['get'](_0xc4ac60(0x2b5),async(_0x3d8738,_0x3cda42)=>{const _0xee6f1=_0xc4ac60,_0xd8c3de=await getTotalSize(_0x3d8738[_0xee6f1(0x24e)][_0xee6f1(0x22c)]);_0x3cda42[_0xee6f1(0x1ee)](_0xd8c3de['toString']());}),expressApp['get'](_0xc4ac60(0x213),(_0x592438,_0x1e6656)=>{const _0x138596=_0xc4ac60,_0x1b84fc=_0x592438[_0x138596(0x24e)][_0x138596(0x240)];let _0xd2bd74=_0x1b84fc;if(global[_0x138596(0x1ff)]){if(THUMB_SUPP_FILES[_0x138596(0x265)](_0x1b84fc)){const _0x2a105f='true'===_0x592438['query'][_0x138596(0x202)],_0x2dac71=_0x1b84fc['replace'](/\W/g,'');if(_0xd2bd74=app[_0x138596(0x1ef)+'r']()+'/'+_0x2dac71+(_0x2a105f?'_m':'')+'.jpg',!app[_0x138596(0x21d)](_0xd2bd74)){const _0x45244b=_0x2a105f?0x120:0xb4,_0xda4aff=_0x2a105f?0xc8:0x78;app[_0x138596(0x29d)](_0x1b84fc,_0xd2bd74,_0x45244b,_0xda4aff);}}_0x1e6656[_0x138596(0x2bd)](_0xd2bd74,{'dotfiles':_0x138596(0x28f)});}else _0x1e6656[_0x138596(0x2bd)](_0x1b84fc,{'dotfiles':_0x138596(0x28f)});}),expressApp[_0xc4ac60(0x252)](_0xc4ac60(0x1ea),(_0x5932a7,_0xe64e98)=>{const _0xf41d9a=_0xc4ac60;let _0x4cdae5=usePassword?_0xf41d9a(0x2bb):'';_0x5932a7[_0xf41d9a(0x252)](_0xf41d9a(0x293)),(_0xe64e98[_0xf41d9a(0x273)][_0xf41d9a(0x263)]&&(_0x4cdae5=''),createSession(_0xe64e98,_0x5932a7[_0xf41d9a(0x252)](_0xf41d9a(0x226))),_0xe64e98[_0xf41d9a(0x1ee)]({'status':!_0x4cdae5,'message':_0x4cdae5,'data':{'isPremium':isPremium}}));}),expressApp[_0xc4ac60(0x2a7)](_0xc4ac60(0x1d5)+'ssword',(_0x5ea70f,_0x45136b)=>{const _0x5dfade=_0xc4ac60,_0x4f2e98=_0x5ea70f[_0x5dfade(0x222)]['password']===password,_0x469549=_0x4f2e98?'':'Wrong\x20passwo'+'rd';_0x4f2e98&&createSession(_0x45136b,_0x5ea70f['get']('User-Agent')),_0x45136b[_0x5dfade(0x1ee)]({'status':!_0x469549,'message':_0x469549});}),expressApp[_0xc4ac60(0x252)]('/events',(_0x5ea107,_0x13a7cf)=>{const _0xc79cab=_0xc4ac60;_0x13a7cf['writeHead'](0xc8,{'Content-Type':'text/event-s'+_0xc79cab(0x1f2),'Connection':_0xc79cab(0x22e),'Cache-Control':'no-cache'}),_0x5ea107['on'](_0xc79cab(0x259),()=>deleteSession(_0x13a7cf));}),expressApp['get'](_0xc4ac60(0x29e),(_0x3753de,_0x81b044)=>{const _0x31d205=_0xc4ac60;global['parent']&&parent[_0x31d205(0x22b)](_0x31d205(0x29b)+_0x31d205(0x1f6)),_0x81b044[_0x31d205(0x1ee)]('ok');}),expressApp[_0xc4ac60(0x252)]('/',(_0x1ccac0,_0x1dd366)=>{const _0x39ee27=_0xc4ac60;_0x1dd366[_0x39ee27(0x2bd)](path[_0x39ee27(0x23e)](homePath,_0x39ee27(0x2a9)));});